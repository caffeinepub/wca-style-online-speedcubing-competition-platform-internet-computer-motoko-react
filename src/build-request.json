{
  "kind": "build_request",
  "title": "Deploy with a new backend canister and update env.json BACKEND_CANISTER_ID",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-91",
      "text": "Deploy a NEW backend canister (as requested) and capture the newly created backend canister ID for this deployment.",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "Continue with new canister",
          "Start"
        ]
      },
      "acceptanceCriteria": [
        "A new backend canister is created/deployed (new canister ID).",
        "The new backend canister ID is recorded for use by the frontend configuration."
      ]
    },
    {
      "id": "REQ-92",
      "text": "Update `frontend/public/env.json` so `BACKEND_CANISTER_ID` is set to the newly deployed backend canister ID (replace the placeholder value `\"YOUR_BACKEND_CANISTER_ID_HERE\"`).",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "BACKEND_CANISTER_ID is not defined in env.json",
          "Start"
        ]
      },
      "acceptanceCriteria": [
        "`frontend/public/env.json` contains a non-placeholder, non-empty `BACKEND_CANISTER_ID` value.",
        "Running the existing preflight check (`runPreflightChecks` in `frontend/src/lib/goLivePreflight.ts`) no longer reports the failure: \"BACKEND_CANISTER_ID is not defined in env.json\"."
      ]
    },
    {
      "id": "REQ-93",
      "text": "Run the go-live build + deploy flow again after updating `frontend/public/env.json` and ensure it completes successfully without deployment errors.",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "Yes",
          "Start"
        ]
      },
      "acceptanceCriteria": [
        "The go-live flow completes successfully end-to-end (no failed step in the deployment sequence).",
        "Admin Go Live page no longer blocks deployment due to missing `BACKEND_CANISTER_ID`.",
        "User-facing deployment/preflight messaging remains English-only."
      ]
    }
  ],
  "constraints": [
    "Do not change anything else than necessary beyond deploying a new backend canister and updating `frontend/public/env.json` with the new canister ID.",
    "Keep all user-facing text in English."
  ],
  "nonGoals": [
    "Do not implement new product features unrelated to deployment/configuration.",
    "Do not attempt to preserve or migrate data from any previous backend canister into the new canister as part of this request (new canister implies a fresh state unless a separate migration plan is requested).",
    "Do not modify immutable frontend paths listed in SYSTEM_CONTEXT."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}